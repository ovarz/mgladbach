RewriteEngine On
RewriteBase /

# Abaikan jika file/folder aslinya ada
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d

# --- AUTH & DASHBOARD ---
RewriteRule ^login/?$ login/index.php [L,QSA]
RewriteRule ^logout/?$ logout.php [L,QSA]
RewriteRule ^admin/?$ admin/index.php [L,QSA]

# --- ADMIN PLAYER MODULE (LIST GLOBAL) ---
# Pastikan semua list global ini berada DI ATAS penangkap ID Pemain
RewriteRule ^admin/player/?$ admin/player/index.php [L,QSA]
RewriteRule ^admin/player/add/?$ admin/player/add.php [L,QSA]
RewriteRule ^admin/player/attendance/?$ admin/player/attendance_list.php [L,QSA]
RewriteRule ^admin/player/payment/?$ admin/player/payment_list.php [L,QSA]
RewriteRule ^admin/player/report/?$ admin/player/report_list.php [L,QSA]

# --- ADMIN PLAYER DYNAMIC [ID] ---
RewriteRule ^admin/player/([A-Za-z0-9]+)/?$ admin/player/profile.php?id=$1 [L,QSA]
RewriteRule ^admin/player/([A-Za-z0-9]+)/edit/?$ admin/player/edit.php?id=$1 [L,QSA]
RewriteRule ^admin/player/([A-Za-z0-9]+)/attendance/add/?$ admin/player/attendance_add.php?id=$1 [L,QSA]
RewriteRule ^admin/player/([A-Za-z0-9]+)/payment/add/?$ admin/player/payment_add.php?id=$1 [L,QSA]
RewriteRule ^admin/player/([A-Za-z0-9]+)/payment/edit/([0-9]+)/?$ admin/player/payment_edit.php?id=$1&inv=$2 [L,QSA]
RewriteRule ^admin/player/([A-Za-z0-9]+)/report/add/?$ admin/player/report_add.php?id=$1 [L,QSA]
RewriteRule ^admin/player/([A-Za-z0-9]+)/([A-Za-z0-9\-]+)/edit/?$ admin/player/report_edit.php?id=$1&link=$2 [L,QSA]
RewriteRule ^admin/player/([A-Za-z0-9]+)/([A-Za-z0-9\-]+)/generate/?$ admin/player/report_generate.php?id=$1&link=$2 [L,QSA]
RewriteRule ^admin/player/([A-Za-z0-9]+)/([A-Za-z0-9\-]+)/?$ admin/player/report_detail.php?id=$1&link=$2 [L,QSA]

# --- ADMIN COACH MODULE ---
RewriteRule ^admin/coach/?$ admin/coach/index.php [L,QSA]
RewriteRule ^admin/coach/add/?$ admin/coach/add.php [L,QSA]
RewriteRule ^admin/coach/([A-Za-z0-9]+)/?$ admin/coach/profile.php?id=$1 [L,QSA]
RewriteRule ^admin/coach/([A-Za-z0-9]+)/edit/?$ admin/coach/edit.php?id=$1 [L,QSA]

# --- ADMIN SETTINGS ---
RewriteRule ^admin/setting/team/?$ admin/setting/team/index.php [L,QSA]
RewriteRule ^admin/setting/team/add/?$ admin/setting/team/add.php [L,QSA]
RewriteRule ^admin/setting/team/edit/([0-9]+)/?$ admin/setting/team/edit.php?id=$1 [L,QSA]

RewriteRule ^admin/setting/session/?$ admin/setting/session/index.php [L,QSA]
RewriteRule ^admin/setting/session/add/?$ admin/setting/session/add.php [L,QSA]
RewriteRule ^admin/setting/session/edit/([0-9]+)/?$ admin/setting/session/edit.php?id=$1 [L,QSA]

RewriteRule ^admin/setting/location/?$ admin/setting/location/index.php [L,QSA]
RewriteRule ^admin/setting/location/add/?$ admin/setting/location/add.php [L,QSA]
RewriteRule ^admin/setting/location/edit/([A-Za-z0-9]+)/?$ admin/setting/location/edit.php?code=$1 [L,QSA]

# --- PLAYER VIEW MODULE ---
RewriteRule ^player/([A-Za-z0-9]+)/?$ player/profile.php?id=$1 [L,QSA]
RewriteRule ^player/([A-Za-z0-9]+)/([A-Za-z0-9\-]+)/generate/?$ player/report_generate.php?id=$1&link=$2 [L,QSA]
RewriteRule ^player/([A-Za-z0-9]+)/([A-Za-z0-9\-]+)/?$ player/report_detail.php?id=$1&link=$2 [L,QSA]