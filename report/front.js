document.addEventListener('DOMContentLoaded',()=>{const generateButton=document.querySelector('.button-generate');const frameToCapture=document.getElementById('result-preview-frame');const downloadButton=document.getElementById('download-report-btn');const playerInfoMappings=[{inputId:'name-input',displayId:'name-display',label:'Name'},{inputId:'birth-input',displayId:'birth-display',label:'Date of Birth'},{inputId:'age-input',displayId:'age-display',label:'Age Group / Team'},{inputId:'coach-input',displayId:'coach-display',label:'Coach'},];generateButton.addEventListener('click',()=>{playerInfoMappings.forEach(mapping=>{const inputElement=document.getElementById(mapping.inputId);const displayElement=document.getElementById(mapping.displayId);const value=inputElement.value.trim();displayElement.innerHTML=`${value || '-'}</span>`})});downloadButton.addEventListener('click',()=>{const elementToCapture=frameToCapture;const nameInput=document.getElementById('name-input');if(!nameInput||nameInput.value.trim()===''){alert("Please generate the report first by filling in the Name field.");return}html2canvas(elementToCapture,{scale:3.5,useCORS:!0}).then(canvas=>{const imageDataURL=canvas.toDataURL('image/jpeg',0.9);const link=document.createElement('a');link.href=imageDataURL;link.download='Report_'+(document.getElementById('name-input').value.trim()||'Player')+'_'+new Date().toISOString().slice(0,10)+'.jpg';document.body.appendChild(link);link.click();document.body.removeChild(link)}).catch(error=>{console.error('Download failed:',error);alert('Could not download report. Check the console for details.')})})})